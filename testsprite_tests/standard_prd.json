{
  "meta": {
    "project": "Sun Motors - Sistema de Gestão de Campanhas Publicitárias",
    "date": "2025-12-10",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Sun Motors is a comprehensive digital advertising campaign management platform designed for multi-brand vehicle dealerships. It streamlines campaign management, budgeting, lead tracking, optimization, and reporting, offering a unified dashboard and robust role-based access control (RBAC). The system integrates a React 19 frontend with Supabase backend services for authentication, data storage, and analytics.",
  "core_goals": [
    "Enable efficient management of advertising campaigns across multiple vehicle brands.",
    "Provide a centralized dashboard with real-time KPIs and performance charts.",
    "Allow detailed budgeting and allocation by brand, model, and advertising accounts.",
    "Support lead management with import/export and funnel visualization.",
    "Facilitate optimization tracking with history and hypothesis management.",
    "Generate comprehensive reports with filtering, aggregation, and CSV import capabilities.",
    "Ensure secure and role-based access to application features and data.",
    "Offer responsive and user-friendly UI components and workflows."
  ],
  "key_features": [
    "User authentication and profile management with Supabase and persistent sessions.",
    "Role Based Access Control (RBAC) enforcing permissions on routes and UI elements for ADM, Sócios, Gestores, Marketing roles.",
    "Dashboard with KPIs such as investment, impressions, clicks, conversions, and trend charts with filtering by brand and period.",
    "Campaign management supporting multi-step creation wizards, group and creative asset management.",
    "Leads management with CSV import, advanced filtering, funnel stages, and detailed lead views.",
    "Budgeting features including monthly and detailed budgets with status and observation fields.",
    "Optimization history tracking with categorization, status updates, and responsible user tracking.",
    "Comprehensive reporting with metric aggregation, trend charts, importation of meta ads CSV, and detailed filters cascading from brand to platform to account.",
    "Media management with public storage client for uploading and managing media files.",
    "Reusable UI components including Sidebar, MobileHeader, CurrencyInput, modals, badges, charts and form components."
  ],
  "user_flow_summary": [
    "User visits the app and is routed to the Auth page if unauthenticated.",
    "On login/signup, session is persisted with Supabase and user profile loaded with role extraction.",
    "Users see a role-appropriate initial screen: Dashboard for ADM or Onboard for others.",
    "Using Sidebar, users navigate to features like Campaigns, Budget, Leads, Optimizations, Reports, etc.",
    "Campaign creation is a multi-step wizard guiding through basic info, budget, ad groups, creatives, and review.",
    "Leads can be imported via CSV, filtered, and managed through stages with detailed side panels.",
    "Users viewing Reports can apply cascading filters by brand, platform, and advertising account, and import CSV data.",
    "Admin-level users manage system settings, user profiles, and RBAC permissions in Configurations.",
    "Throughout, Toast notifications provide feedback on success or error.",
    "Session heartbeat and automatic token refresh maintain a secure logged-in state during usage."
  ],
  "validation_criteria": [
    "User authentication must prevent access to protected routes without valid session.",
    "Role based access control (RBAC) permissions must be enforced on route access and UI elements.",
    "Campaign creation wizard must save correct data at each step and persist progress.",
    "Lead imports via CSV must validate data against existing campaigns and accounts, ignoring invalid entries.",
    "Dashboard KPIs and charts must reflect data filters accurately and update in real time.",
    "Budget data must support CRUD with validations on monthly and detailed budgets.",
    "Optimization entries must track creator, status changes, and link to campaigns and creatives.",
    "Report imports must normalize dates to weeks and parse monetary and percentage values properly.",
    "Media uploads use a public storage client without session persistence.",
    "API services must handle Supabase errors uniformly and inform the frontend of issues via exceptions.",
    "Frontend components must show loading states and error messages appropriately.",
    "UI must be responsive across devices, with sidebar collapse state persisted in localStorage.",
    "All CRUD operations must be atomic and confirmed with success or failure notifications to users."
  ],
  "code_summary": {
    "tech_stack": [
      "javascript",
      "react",
      "vite",
      "supabase-js",
      "chart.js",
      "papaparse",
      "xlsx"
    ],
    "features": [
      {
        "name": "auth-provider",
        "description": "Contexto de autenticação Supabase com heartbeat, persistência em localStorage e busca de perfil",
        "files": [
          "src/contexts/AuthContext.jsx",
          "src/services-apis/supabase/perfilUsuarioService.js",
          "src/services-apis/supabase/client.js"
        ]
      },
      {
        "name": "auth-ui",
        "description": "Tela de login, cadastro e recuperação com navegação pós-login",
        "files": [
          "src/pages/Auth.jsx"
        ]
      },
      {
        "name": "routing-protegido",
        "description": "Proteção de rotas e layout principal com redirecionamento para /auth",
        "files": [
          "src/App.jsx",
          "src/layouts/MainLayout.jsx"
        ]
      },
      {
        "name": "supabase-clients",
        "description": "Cliente Supabase principal com persistência e cliente de mídias sem sessão persistente",
        "files": [
          "src/services-apis/supabase/client.js",
          "src/services-apis/supabase/mediaClient.js"
        ]
      },
      {
        "name": "services-supabase",
        "description": "Serviços de domínio (anúncios, campanhas, leads, relatórios, perfis) sobre Supabase",
        "files": [
          "src/services-apis/supabase/anunciosService.js",
          "src/services-apis/supabase/campanhasService.js",
          "src/services-apis/supabase/leadsService.js",
          "src/services-apis/supabase/relatoriosService.js",
          "src/services-apis/supabase/perfilUsuarioService.js"
        ]
      },
      {
        "name": "dashboard-modulos",
        "description": "Módulos de UI para dashboards, campanhas, leads, orçamentos, uploads e mídias",
        "files": [
          "src/pages/Dashboard.jsx",
          "src/pages/Campanhas.jsx",
          "src/pages/Leads.jsx",
          "src/pages/Budget.jsx",
          "src/pages/Uploads.jsx",
          "src/pages/Midias.jsx",
          "src/components"
        ]
      },
      {
        "name": "ui-components",
        "description": "Componentes reutilizáveis como modais, headers, badges, inputs e gráficos",
        "files": [
          "src/components/common/Modal.jsx",
          "src/components/common/PageHeader.jsx",
          "src/components/common/StatusBadge.jsx",
          "src/components/CurrencyInput.jsx",
          "src/components/dashboard"
        ]
      },
      {
        "name": "legacy-scripts",
        "description": "Scripts e páginas HTML estáticas para testes e compatibilidade legada",
        "files": [
          "src/script.legacy.js",
          "src/legacy-services.js",
          "teste-api.html",
          "test-api.js"
        ]
      }
    ]
  }
}
